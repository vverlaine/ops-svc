<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <title>Dashboard</title>
  <style>
    body {
      background-color: #f5f7fb;
    }

    .dashboard-hero {
      background: linear-gradient(135deg, #2563eb, #3b82f6);
      border-radius: 1rem;
      color: #fff;
      padding: 2.5rem;
      box-shadow: 0 15px 35px rgba(37, 99, 235, 0.25);
    }

    .dashboard-hero small {
      text-transform: uppercase;
      letter-spacing: .08em;
      opacity: .8;
    }

    .dashboard-hero h1 {
      font-weight: 700;
    }

    .role-badge {
      background: rgba(255, 255, 255, 0.18);
      border-radius: 999px;
      padding: .35rem 1rem;
      display: inline-flex;
      align-items: center;
      gap: .5rem;
      font-weight: 600;
    }

    .quick-card {
      border: none;
      border-radius: 1rem;
      box-shadow: 0 10px 25px rgba(15, 23, 42, .08);
      transition: transform .25s ease, box-shadow .25s ease;
      height: 100%;
    }

    .quick-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 16px 35px rgba(15, 23, 42, .14);
    }

    .quick-card .icon {
      width: 48px;
      height: 48px;
      border-radius: 12px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      margin-bottom: 1rem;
    }

    .quick-card .btn {
      border-radius: 999px;
      font-weight: 600;
    }

    .grid-gap {
      row-gap: 1.5rem;
    }
  </style>
</head>

<body>
  <div th:replace="~{fragments :: navbar}"></div>

  <div class="container py-5" th:with="rol=${user != null ? user.role : 'USUARIO'}">
    <div class="dashboard-hero mb-5">
      <div class="row align-items-center gy-3">
        <div class="col-lg-8">
          <small>Panel principal</small>
          <h1 class="mb-2">Hola, <span th:text="${user != null && user.name != null ? user.name : 'Usuario'}">Usuario</span></h1>
          <p class="mb-0 fs-5" th:switch="${rol}">
            <span th:case="'ADMIN'">Administra usuarios, clientes y visibilidad global del sistema.</span>
            <span th:case="'SUPERVISOR'">Coordina visitas, reasigna técnicos y monitorea tu equipo.</span>
            <span th:case="'TECNICO'">Consulta tus tareas del día y registra check-in / check-out fácilmente.</span>
            <span th:case="*">Explora las secciones disponibles según tu rol.</span>
          </p>
        </div>
        <div class="col-lg-4 text-lg-end">
          <span class="role-badge">
            <i class="bi bi-person-badge"></i>
            <span th:text="${rol}">Rol</span>
          </span>
        </div>
      </div>
    </div>

    <div class="row g-4 grid-gap" th:if="${rol == 'ADMIN'}">
      <div class="col-md-4">
        <div class="card quick-card h-100 p-4">
          <div class="icon bg-primary text-white">
            <i class="bi bi-people"></i>
          </div>
          <h5 class="fw-bold">Gestión de usuarios</h5>
          <p class="text-muted flex-grow-1">Crea, edita o desactiva cuentas con roles personalizados.</p>
          <a th:href="@{/admin/users}" class="btn btn-primary mt-2">
            <i class="bi bi-arrow-right-circle me-1"></i> Ir a usuarios
          </a>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card quick-card h-100 p-4">
          <div class="icon bg-info text-white">
            <i class="bi bi-building"></i>
          </div>
          <h5 class="fw-bold">Clientes y sitios</h5>
          <p class="text-muted flex-grow-1">Mantén la información de clientes al día y sus ubicaciones.</p>
          <a th:href="@{/clientes}" class="btn btn-outline-primary mt-2">
            <i class="bi bi-geo-alt me-1"></i> Gestionar clientes
          </a>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card quick-card h-100 p-4">
          <div class="icon bg-success text-white">
            <i class="bi bi-bar-chart"></i>
          </div>
          <h5 class="fw-bold">Seguimiento operativo</h5>
          <p class="text-muted flex-grow-1">Consulta visitas, técnicos y supervisores activos en el sistema.</p>
          <a th:href="@{/visitas}" class="btn btn-outline-primary mt-2">
            <i class="bi bi-search me-1"></i> Ver actividad
          </a>
        </div>
      </div>
    </div>

    <div class="row g-4 grid-gap" th:if="${rol == 'SUPERVISOR'}">
      <div class="col-md-6">
        <div class="card quick-card h-100 p-4">
          <div class="icon bg-primary text-white">
            <i class="bi bi-calendar-plus"></i>
          </div>
          <h5 class="fw-bold">Planificar visita</h5>
          <p class="text-muted flex-grow-1">Crea una nueva visita, define prioridad y asigna un técnico.</p>
          <a th:href="@{/visits/crear}" class="btn btn-primary mt-2">
            <i class="bi bi-plus-circle me-1"></i> Nueva visita
          </a>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card quick-card h-100 p-4">
          <div class="icon bg-success text-white">
            <i class="bi bi-people"></i>
          </div>
          <h5 class="fw-bold">Visitas programadas</h5>
          <p class="text-muted flex-grow-1">Consulta y administra las visitas de tu equipo en un solo lugar.</p>
          <a th:href="@{/visitas}" class="btn btn-outline-primary mt-2">
            <i class="bi bi-eye me-1"></i> Revisar visitas</a>
        </div>
      </div>
    </div>

    <div class="row g-4 grid-gap" th:if="${rol == 'TECNICO'}">
      <div class="col-md-6 col-lg-5">
        <div class="card quick-card h-100 p-4">
          <div class="icon bg-primary text-white">
            <i class="bi bi-calendar-check"></i>
          </div>
          <h5 class="fw-bold">Visitas asignadas</h5>
          <p class="text-muted flex-grow-1">Consulta tus visitas planificadas, registra check-in / check-out y revisa instrucciones.</p>
          <a th:href="@{/visitas}" class="btn btn-primary mt-2">
            <i class="bi bi-arrow-right-circle me-1"></i> Abrir mis visitas
          </a>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
